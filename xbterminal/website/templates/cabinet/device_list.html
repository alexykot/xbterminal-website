{% extends "cabinet/base.html" %}
{% load i18n %}

{% block cabinet_content %}
<div>
    <a class="btn btn-default" href="{% url 'website:create_device' %}?device_type=hardware">{% trans 'Create terminal' %}</a>
    <a class="btn btn-default" href="{% url 'website:create_device' %}?device_type=mobile">{% trans 'Create mobile app' %}</a>
    <a class="btn btn-default" href="{% url 'website:create_device' %}?device_type=web">{% trans 'Create web app' %}</a>
    <a class="btn btn-default" href="{% url 'website:activate_device' %}">{% trans 'Activate device' %}</a>
</div>
<table id="devices" class="table table-striped table-bordered table-responsive">
    <tr>
        <th>{% trans 'Name' %}</th>
        <th>{% trans 'Status' %}</th>
        <th>{% trans 'Receiving address' %}</th>
        <th>{% trans 'Payment processor' %}</th>
        <th>{% trans 'Actions' %}</th>
    </tr>
    {% for device in devices %}
    <tr>
        <td>
            {% if device.status == 'activation' %}
            {{ device.name }}
            {% else %}
            <a href="{% url 'website:device' device.key %}">{{ device.name }}</a>
            {% endif %}
        </td>
        <td>
            {{ device.get_status_display }}
            {% if device.is_online %}<div class="device-online" title="device online">â€¢</div>{% endif %}
        </td>
        <td>
            {% if device.bitcoin_address %}
                {{ device.bitcoin_address|slice:":6" }}...{{ device.bitcoin_address|slice:"-6:" }}
            {% else %}
                --
            {% endif %}
        </td>
        <td>{{ device.payment_processor_info|default:"--" }}</td>
        <td>
            {% if device.status == 'active' or device.status == 'suspended' %}
            <div><a href="{% url 'website:reconciliation' device.key %}">{% trans 'reconciliation' %}</a></div>
            {% endif %}
            {% if device.status == 'active' %}
            <div><a href="{% url 'website:payment' device.key %}" target="_blank">{% trans 'online POS' %}</a></div>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
